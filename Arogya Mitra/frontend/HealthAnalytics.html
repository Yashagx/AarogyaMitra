<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Health Analytics | Aarogya Mitra</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f1f8f4 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: white;
            padding: 25px 30px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #0b5ed7;
            font-size: 28px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .back-btn {
            background: #0b5ed7;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .back-btn:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }

        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.12);
        }

        .stat-card h3 {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stat-card .value {
            font-size: 32px;
            font-weight: 700;
            color: #333;
            margin-bottom: 8px;
        }

        .stat-card .change {
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-card .change.positive {
            color: #198754;
        }

        .stat-card .change.negative {
            color: #dc3545;
        }

        /* Chart Containers */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            padding: 24px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .chart-card h2 {
            font-size: 18px;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .chart-card.full-width {
            grid-column: 1 / -1;
        }

        /* AI Insights */
        .insights-section {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .insights-section h2 {
            color: #0b5ed7;
            font-size: 20px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #0b5ed7;
        }

        .insight-item h3 {
            font-size: 16px;
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .insight-item p {
            color: #666;
            line-height: 1.6;
            font-size: 14px;
        }

        /* Loading */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #0b5ed7;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            color: #0b5ed7;
            font-weight: 600;
        }

        /* Filters */
        .filters-section {
            background: white;
            padding: 20px 30px;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-group label {
            font-size: 12px;
            color: #666;
            font-weight: 600;
        }

        .filter-group select {
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-group select:focus {
            outline: none;
            border-color: #0b5ed7;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
        }

        /* Table */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .data-table th,
        .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        .data-table th {
            background: #f8f9fa;
            color: #333;
            font-weight: 600;
            font-size: 13px;
        }

        .data-table td {
            font-size: 14px;
            color: #666;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
        }

        .badge.high {
            background: #ffe8e8;
            color: #dc3545;
        }

        .badge.medium {
            background: #fff3cd;
            color: #fd7e14;
        }

        .badge.low {
            background: #e7f5ec;
            color: #198754;
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <div class="loading-text">Loading Health Analytics...</div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <i class="fas fa-chart-line"></i>
                Health Analytics Dashboard
            </h1>
            <button class="back-btn" onclick="window.location.href='dashboard.html'">
                <i class="fas fa-arrow-left"></i>
                Back to Dashboard
            </button>
        </div>

        <!-- Filters -->
        <div class="filters-section">
            <div class="filter-group">
                <label>Time Period</label>
                <select id="timePeriod" onchange="updateDashboard()">
                    <option value="7">Last 7 Days</option>
                    <option value="30" selected>Last 30 Days</option>
                    <option value="90">Last 90 Days</option>
                    <option value="365">Last Year</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Region</label>
                <select id="regionFilter" onchange="updateDashboard()">
                    <option value="all">All Regions</option>
                    <option value="local">My Area</option>
                </select>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-grid" id="statsGrid">
            <!-- Will be populated dynamically -->
        </div>

        <!-- Charts -->
        <div class="charts-grid">
            <div class="chart-card">
                <h2><i class="fas fa-virus"></i> Common Symptoms Trend</h2>
                <div class="chart-container">
                    <canvas id="symptomsChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h2><i class="fas fa-user-injured"></i> Urgency Distribution</h2>
                <div class="chart-container">
                    <canvas id="urgencyChart"></canvas>
                </div>
            </div>

            <div class="chart-card full-width">
                <h2><i class="fas fa-hospital-user"></i> Healthcare Utilization</h2>
                <div class="chart-container">
                    <canvas id="utilizationChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h2><i class="fas fa-calendar-check"></i> Appointment Trends</h2>
                <div class="chart-container">
                    <canvas id="appointmentChart"></canvas>
                </div>
            </div>

            <div class="chart-card">
                <h2><i class="fas fa-users"></i> Age Group Analysis</h2>
                <div class="chart-container">
                    <canvas id="ageGroupChart"></canvas>
                </div>
            </div>
        </div>

        <!-- AI Insights -->
        <div class="insights-section">
            <h2><i class="fas fa-brain"></i> AI-Powered Health Insights</h2>
            <div id="aiInsights">
                <div class="insight-item">
                    <h3><i class="fas fa-spinner fa-pulse"></i> Analyzing health data...</h3>
                    <p>Please wait while we generate personalized insights from your community health data.</p>
                </div>
            </div>
        </div>

        <!-- Top Conditions Table -->
        <div class="chart-card">
            <h2><i class="fas fa-list-ol"></i> Top Health Conditions in Your Area</h2>
            <table class="data-table" id="conditionsTable">
                <thead>
                    <tr>
                        <th>Rank</th>
                        <th>Condition</th>
                        <th>Cases</th>
                        <th>Trend</th>
                        <th>Severity</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Will be populated dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Global variables
        let symptomsChart, urgencyChart, utilizationChart, appointmentChart, ageGroupChart;
        let analyticsData = {};
        let userProfile = null;

        // Check session
        const name = sessionStorage.getItem("am_name");
        const mobile = sessionStorage.getItem("am_mobile");

        if (!name || !mobile) {
            alert("⚠️ Session expired. Please login again.");
            window.location.href = "index.html";
        }

        // Initialize dashboard
        window.addEventListener('DOMContentLoaded', async () => {
            await loadUserProfile();
            await loadAnalyticsData();
            initializeCharts();
            await generateAIInsights();
            document.getElementById('loadingOverlay').style.display = 'none';
        });

        // Load user profile
        async function loadUserProfile() {
            try {
                const res = await fetch(`/api/abha/profile?name=${encodeURIComponent(name)}&mobile=${mobile}`, {
                    credentials: "include"
                });
                if (!res.ok) throw new Error('Profile fetch failed');
                userProfile = await res.json();
            } catch (error) {
                console.error('Profile load error:', error);
            }
        }

        // Load analytics data from database
        async function loadAnalyticsData() {
            try {
                const timePeriod = document.getElementById('timePeriod').value;
                const region = document.getElementById('regionFilter').value;

                // Fetch symptom checks data
                const symptomsRes = await fetch('/api/analytics/symptoms', {
                    credentials: "include"
                });
                const symptomsData = await symptomsRes.json();

                // Fetch appointments data
                const appointmentsRes = await fetch('/api/analytics/appointments', {
                    credentials: "include"
                });
                const appointmentsData = await appointmentsRes.json();

                // Fetch prescriptions and lab reports
                const prescriptionsRes = await fetch('/api/prescriptions', {
                    credentials: "include"
                });
                const prescriptionsData = await prescriptionsRes.json();

                const labReportsRes = await fetch('/api/lab-reports', {
                    credentials: "include"
                });
                const labReportsData = await labReportsRes.json();

                analyticsData = {
                    symptoms: symptomsData,
                    appointments: appointmentsData,
                    prescriptions: prescriptionsData,
                    labReports: labReportsData
                };

                updateStatsCards();
                updateConditionsTable();

            } catch (error) {
                console.error('Analytics data load error:', error);
                // Use mock data if API fails
                analyticsData = getMockAnalyticsData();
                updateStatsCards();
                updateConditionsTable();
            }
        }

        // Update stats cards
        function updateStatsCards() {
            const stats = calculateStats();
            const statsHTML = `
                <div class="stat-card">
                    <h3><i class="fas fa-users"></i> Total Health Checks</h3>
                    <div class="value">${stats.totalChecks}</div>
                    <div class="change positive">
                        <i class="fas fa-arrow-up"></i> ${stats.checksChange}% this month
                    </div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-exclamation-triangle"></i> Urgent Cases</h3>
                    <div class="value">${stats.urgentCases}</div>
                    <div class="change ${stats.urgentChange >= 0 ? 'negative' : 'positive'}">
                        <i class="fas fa-arrow-${stats.urgentChange >= 0 ? 'up' : 'down'}"></i> 
                        ${Math.abs(stats.urgentChange)}% from last month
                    </div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-calendar-check"></i> Appointments Booked</h3>
                    <div class="value">${stats.appointments}</div>
                    <div class="change positive">
                        <i class="fas fa-arrow-up"></i> ${stats.appointmentChange}% increase
                    </div>
                </div>
                <div class="stat-card">
                    <h3><i class="fas fa-heartbeat"></i> Most Common Symptom</h3>
                    <div class="value" style="font-size: 20px;">${stats.topSymptom}</div>
                    <div class="change" style="color: #666;">
                        ${stats.topSymptomCount} reported cases
                    </div>
                </div>
            `;
            document.getElementById('statsGrid').innerHTML = statsHTML;
        }

        // Calculate statistics
        function calculateStats() {
            const symptoms = analyticsData.symptoms?.history || [];
            const appointments = analyticsData.appointments?.appointments || [];
            
            return {
                totalChecks: symptoms.length,
                checksChange: 15,
                urgentCases: symptoms.filter(s => s.urgency_level === 'URGENT').length,
                urgentChange: -8,
                appointments: appointments.length,
                appointmentChange: 22,
                topSymptom: 'Fever',
                topSymptomCount: 45
            };
        }

        // Initialize all charts
        function initializeCharts() {
            createSymptomsChart();
            createUrgencyChart();
            createUtilizationChart();
            createAppointmentChart();
            createAgeGroupChart();
        }

        // Symptoms Trend Chart
        function createSymptomsChart() {
            const ctx = document.getElementById('symptomsChart').getContext('2d');
            symptomsChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                    datasets: [
                        {
                            label: 'Fever',
                            data: [45, 52, 48, 55],
                            borderColor: '#dc3545',
                            backgroundColor: 'rgba(220, 53, 69, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Cough',
                            data: [38, 42, 40, 45],
                            borderColor: '#fd7e14',
                            backgroundColor: 'rgba(253, 126, 20, 0.1)',
                            tension: 0.4
                        },
                        {
                            label: 'Headache',
                            data: [30, 28, 32, 35],
                            borderColor: '#0b5ed7',
                            backgroundColor: 'rgba(11, 94, 215, 0.1)',
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Urgency Distribution Chart
        function createUrgencyChart() {
            const ctx = document.getElementById('urgencyChart').getContext('2d');
            urgencyChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Normal', 'High', 'Urgent'],
                    datasets: [{
                        data: [65, 25, 10],
                        backgroundColor: [
                            '#198754',
                            '#fd7e14',
                            '#dc3545'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        // Healthcare Utilization Chart
        function createUtilizationChart() {
            const ctx = document.getElementById('utilizationChart').getContext('2d');
            utilizationChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [
                        {
                            label: 'Symptom Checks',
                            data: [120, 145, 160, 155, 170, 185],
                            backgroundColor: '#0b5ed7'
                        },
                        {
                            label: 'Appointments',
                            data: [45, 52, 58, 62, 68, 75],
                            backgroundColor: '#198754'
                        },
                        {
                            label: 'Prescriptions',
                            data: [38, 42, 48, 52, 55, 60],
                            backgroundColor: '#fd7e14'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Appointment Trends Chart
        function createAppointmentChart() {
            const ctx = document.getElementById('appointmentChart').getContext('2d');
            appointmentChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Appointments',
                        data: [12, 19, 15, 17, 22, 18, 8],
                        borderColor: '#0b5ed7',
                        backgroundColor: 'rgba(11, 94, 215, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Age Group Analysis Chart
        function createAgeGroupChart() {
            const ctx = document.getElementById('ageGroupChart').getContext('2d');
            ageGroupChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['0-18', '19-35', '36-50', '51-65', '65+'],
                    datasets: [{
                        label: 'Health Checks',
                        data: [25, 65, 85, 45, 30],
                        backgroundColor: [
                            '#0b5ed7',
                            '#198754',
                            '#fd7e14',
                            '#dc3545',
                            '#6f42c1'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // Update conditions table
        function updateConditionsTable() {
            const conditions = [
                { rank: 1, name: 'Common Cold & Flu', cases: 156, trend: '+12%', severity: 'low' },
                { rank: 2, name: 'Fever', cases: 142, trend: '+8%', severity: 'medium' },
                { rank: 3, name: 'Headache', cases: 98, trend: '-5%', severity: 'low' },
                { rank: 4, name: 'Digestive Issues', cases: 87, trend: '+15%', severity: 'medium' },
                { rank: 5, name: 'Respiratory Problems', cases: 65, trend: '+22%', severity: 'high' }
            ];

            const tableHTML = conditions.map(c => `
                <tr>
                    <td><strong>#${c.rank}</strong></td>
                    <td>${c.name}</td>
                    <td><strong>${c.cases}</strong></td>
                    <td style="color: ${c.trend.startsWith('+') ? '#dc3545' : '#198754'}">${c.trend}</td>
                    <td><span class="badge ${c.severity}">${c.severity.toUpperCase()}</span></td>
                </tr>
            `).join('');

            document.querySelector('#conditionsTable tbody').innerHTML = tableHTML;
        }

        // Generate AI insights using Groq
        async function generateAIInsights() {
            try {
                // Get Groq API key
                const keyRes = await fetch('/api/groq-key', { credentials: 'include' });
                const { key: GROQ_API_KEY } = await keyRes.json();

                const stats = calculateStats();
                const region = userProfile?.state || 'your region';

                const prompt = `As a health analytics AI, analyze this community health data and provide 3 key insights:

Data Summary:
- Total health checks: ${stats.totalChecks}
- Urgent cases: ${stats.urgentCases}
- Appointments booked: ${stats.appointments}
- Most common symptom: ${stats.topSymptom} (${stats.topSymptomCount} cases)
- Region: ${region}

Provide exactly 3 insights in this format:
1. [Title]: [Brief explanation and recommendation]
2. [Title]: [Brief explanation and recommendation]
3. [Title]: [Brief explanation and recommendation]

Focus on actionable recommendations for community health improvement.`;

                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${GROQ_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'llama-3.3-70b-versatile',
                        messages: [{ role: 'user', content: prompt }],
                        temperature: 0.7,
                        max_tokens: 500
                    })
                });

                const data = await response.json();
                const insights = data.choices[0].message.content;

                displayAIInsights(insights);

            } catch (error) {
                console.error('AI insights error:', error);
                displayFallbackInsights();
            }
        }

        // Display AI insights
        function displayAIInsights(insightsText) {
            const insightLines = insightsText.split('\n').filter(line => line.trim());
            const icons = ['fa-lightbulb', 'fa-chart-line', 'fa-shield-alt'];
            
            let insightsHTML = '';
            let iconIndex = 0;

            insightLines.forEach(line => {
                if (line.match(/^\d+\./)) {
                    const parts = line.split(':');
                    if (parts.length >= 2) {
                        const title = parts[0].replace(/^\d+\.\s*/, '').trim();
                        const content = parts.slice(1).join(':').trim();
                        
                        insightsHTML += `
                            <div class="insight-item">
                                <h3><i class="fas ${icons[iconIndex % 3]}"></i> ${title}</h3>
                                <p>${content}</p>
                            </div>
                        `;
                        iconIndex++;
                    }
                }
            });

            if (insightsHTML) {
                document.getElementById('aiInsights').innerHTML = insightsHTML;
            } else {
                displayFallbackInsights();
            }
        }

        // Fallback insights
        function displayFallbackInsights() {
            const fallbackHTML = `
                <div class="insight-item">
                    <h3><i class="fas fa-lightbulb"></i> Seasonal Health Alert</h3>
                    <p>Common cold and flu cases have increased by 12% this month. Recommend community awareness programs on preventive measures like proper hand hygiene and maintaining social distance during peak seasons.</p>
                </div>
                <div class="insight-item">
                    <h3><i class="fas fa-chart-line"></i> Healthcare Access Improvement</h3>
                    <p>Appointment bookings have increased by 22%, indicating better healthcare awareness. Consider expanding teleconsultation services to reduce waiting times and improve accessibility.</p>
                </div>
                <div class="insight-item">
                    <h3><i class="fas fa-shield-alt"></i> Preventive Care Focus</h3>
                    <p>Respiratory problems show a 22% upward trend. Implement air quality monitoring and organize health camps focusing on respiratory health education and early detection.</p>
                </div>
            `;
            document.getElementById('aiInsights').innerHTML = fallbackHTML;
        }

        // Update dashboard when filters change
        async function updateDashboard() {
            document.getElementById('loadingOverlay').style.display = 'flex';
            await loadAnalyticsData();
            await generateAIInsights();
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        // Mock analytics data
        function getMockAnalyticsData() {
            return {
                symptoms: {
                    history: [
                        { urgency_level: 'URGENT', symptoms_text: 'fever, cough' },
                        { urgency_level: 'NORMAL', symptoms_text: 'headache' },
                        { urgency_level: 'HIGH', symptoms_text: 'stomach pain' }
                    ]
                },
                appointments: {
                    appointments: [
                        { status: 'confirmed' },
                        { status: 'confirmed' },
                        { status: 'pending' }
                    ]
                },
                prescriptions: [],
                labReports: []
            };
        }
    </script>
</body>
</html>